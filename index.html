<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misi√≥n Confidencial</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #111;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 600px;
            padding: 25px;
            background: #1f1f1f;
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(255, 20, 147, 0.15);
            border: 1px solid #333;
            position: relative;
            z-index: 1;
        }
        h1 { color: #ff1493; text-shadow: 0 0 8px #ff1493; letter-spacing: 2px; }
        .hidden { display: none !important; }
        
        /* Input y Botones del Juego */
        input {
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #444;
            background: #2a2a2a;
            color: #fff;
            width: 80%;
            margin-top: 15px;
            font-size: 18px;
            text-align: center;
            outline: none;
        }
        input:focus { border-color: #ff1493; }
        
        button {
            padding: 12px 30px;
            margin-top: 20px;
            background-color: #ff1493;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
        }
        button:hover { background-color: #d60076; transform: translateY(-2px); }
        .error { color: #ff4d4d; margin-top: 15px; font-size: 14px; min-height: 20px; }

        /* Barra de Letras */
        .letters-wrapper {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 30px;
        }
        .break { flex-basis: 100%; height: 15px; }

        .letter-box {
            width: 35px;
            height: 45px;
            border: 2px dashed #444;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            color: #333;
            transition: all 0.5s ease;
        }
        .letter-box.unlocked {
            border: 2px solid #ff1493;
            background: rgba(255, 20, 147, 0.1);
            color: #ff1493;
            box-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
            transform: scale(1.1);
        }
        .heart-slot { border-color: #ff4d4d; }
        .heart-slot.unlocked { color: #ff4d4d; border-color: #ff4d4d; background: rgba(255, 77, 77, 0.1); }
        .spacer { width: 15px; }

        /* Pantalla Final y Animaciones */
        #final-screen { animation: fadeIn 2s ease; }
        .big-heart { font-size: 60px; margin: 20px 0; animation: beat 1.2s infinite; }
        @keyframes beat { 0% { transform: scale(1); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .progress { color: #777; font-size: 12px; margin-bottom: 10px; }

        /* --- ESTILOS PARA LOS REGALOS --- */
        
        .gifts-container {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .gift-btn {
            background: linear-gradient(45deg, #ff1493, #ff69b4);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            width: 80%;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.4);
            transition: transform 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .gift-btn:hover { transform: scale(1.05); }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }

        .modal-content {
            background: #252525;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            border: 1px solid #ff1493;
            position: relative;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.3);
            text-align: center;
        }

        .close-btn {
            position: absolute;
            top: 10px; right: 15px;
            font-size: 24px;
            color: #aaa;
            cursor: pointer;
        }

        /* CARROUSEL */
        .carousel-container {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #444;
        }
        .carousel-slide {
            width: 100%; height: 100%;
            object-fit: cover;
            display: none;
        }
        .carousel-slide.active { display: block; animation: fade 0.5s; }
        @keyframes fade { from {opacity: .4} to {opacity: 1} }

        /* FECHA EN EL CARROUSEL (NUEVO) */
        .carousel-date {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */
            color: #fff;
            padding: 8px 0;
            font-size: 16px;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            z-index: 10;
        }

        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%; width: auto;
            margin-top: -22px;
            padding: 10px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            background-color: rgba(0,0,0,0.5);
            border-radius: 3px;
            user-select: none;
            z-index: 20; /* Para que quede arriba de la foto */
        }
        .next { right: 0; border-radius: 3px 0 0 3px; }
        .prev { left: 0; border-radius: 0 3px 3px 0; }

        /* TICKET */
        .ticket {
            background-color: #fff8dc;
            color: #333;
            padding: 20px;
            border: 2px dashed #d4af37;
            border-radius: 10px;
            font-family: 'Courier New', Courier, monospace;
            margin-top: 10px;
            transform: rotate(-2deg);
        }
        .ticket h3 { margin: 0; color: #d4af37; border-bottom: 2px solid #d4af37; padding-bottom: 5px; }
        .ticket p { font-size: 18px; font-weight: bold; margin-top: 15px; }

    </style>
</head>
<body>

    <div class="container">
        <div class="letters-wrapper">
            <div id="slot-0" class="letter-box">?</div> <div id="slot-1" class="letter-box">?</div> <div id="slot-2" class="letter-box">?</div> <div id="slot-3" class="letter-box">?</div> <div class="spacer"></div>
            <div id="slot-4" class="letter-box heart-slot">?</div> <div class="break"></div>
            <div id="slot-5" class="letter-box">?</div> <div id="slot-6" class="letter-box">?</div> <div class="spacer"></div>
            <div id="slot-7" class="letter-box">?</div> <div id="slot-8" class="letter-box">?</div> <div id="slot-9" class="letter-box">?</div> 
        </div>

        <div id="question-area">
            <p class="progress">NIVEL DE SEGURIDAD: <span id="q-counter">1</span>/10</p>
            <h2 id="q-title">Cargando...</h2>
            <p id="q-text" style="font-size: 18px; margin: 20px 0;">...</p>
            <input type="text" id="user-input" placeholder="Ingres√° el c√≥digo..." autocomplete="off">
            <br>
            <button onclick="submitAnswer()">DESBLOQUEAR</button>
            <p id="error-msg" class="error"></p>
        </div>

        <div id="final-screen" class="hidden">
            <h1>¬°SISTEMA DESBLOQUEADO!</h1>
            <div class="big-heart">üíñ</div>
            <p>Bien hecho üôÉ, lo lograste Agostinita.</p>
            <p>Solo quer√≠a recordarte lo mucho que te quiero y lo especial que sos para mi.</p>
            
            <div class="gifts-container">
                <button class="gift-btn" onclick="openModal('gift1')">üéÅ Breve resumen en fotos...</button>
                <button class="gift-btn" onclick="openModal('gift2')">üéüÔ∏è ABRIR REGALO 2</button>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay">
        
        <div id="modal-gift1" class="modal-content hidden">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 style="color: #ff69b4;">NUESTROS MOMENTOS</h2>
            
            <div class="carousel-container">
                
                <img src="./1.png" class="carousel-slide" data-date="30/01/2025">
                <img src="./2.png" class="carousel-slide" data-date="25/05/2025">
                <img src="./3.png" class="carousel-slide" data-date="5/08/2025">
                <img src="./4.png" class="carousel-slide" data-date="20/08/2025">
                <img src="./5.png" class="carousel-slide" data-date="30/08/2025">
                <img src="./a.png" class="carousel-slide" data-date="07/09/2025">
                <!-- <img src="./c.png" class="carousel-slide" data-date="07/09/2025"> -->
                <img src="./7.png" class="carousel-slide" data-date="29/11/2025">
                <img src="./8.png" class="carousel-slide" data-date="5/12/2025">
                <img src="./9.png" class="carousel-slide" data-date="16/12/2025">
                <img src="./b.png" class="carousel-slide" data-date="28/12/2025">
                
                <div id="carousel-date-display" class="carousel-date">01/01/2026</div>

                <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
                <a class="next" onclick="changeSlide(1)">&#10095;</a>
            </div>

            <p>Cada foto muestra un punto de avance en nuestra historia, y me gustar√≠a seguir sumando nuevas con vos. Te quiero mucho.</p>
        </div>

        <div id="modal-gift2" class="modal-content hidden">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 style="color: #d4af37;">TICKET ESPECIAL</h2>
            
            <div class="ticket">
                <h3>GOLDEN TICKET</h3>
                <p>VALE POR:</p>
                <p style="font-size: 22px; color: #000;">LO QUE QUIERAS...</p>
                <p style="font-size: 12px; margin-top: 20px;">(V√°lido hasta el 6 de febrero)</p>
            </div>
        </div>

    </div>

    <script>
        // --- CONFIGURACI√ìN DE NIVELES ---
        const levels = [
            { question: "¬øNombre de la due√±a de mi sonrisa?", answers: ["agostina", "agos"], targetIndex: 0, reward: "A" },
            { question: "El lugar donde nos conocimos.", answers: ["gimnasio", "gym", "el gym", "el gimnasio"], targetIndex: 1, reward: "G" },
            { question: "Dicen todo lo que no decimos con palabras...", answers: ["ojos", "miradas", "tus ojos"], targetIndex: 2, reward: "O" },
            { question: "Lugar de nuestra primera salida oficial.", answers: ["starbucks"], targetIndex: 3, reward: "S" },
            { question: "M√∫sculo involuntario que aumenta sus RPM cada vez que te doy un beso.", answers: ["corazon", "coraz√≥n", "<3"], targetIndex: 4, reward: "üíñ" },
            { question: "Magnitud f√≠sica que pasa volando cuando estoy con vos.", answers: ["tiempo", "el tiempo"], targetIndex: 5, reward: "T" },
            { question: "Objeto de tu ba√±o donde te hice buscar mi cepillo de dientes...", answers: ["espejo"], targetIndex: 6, reward: "E" },
            { question: "En la b√∫squeda del tesoro hubo una pista falsa. ¬øC√≥mo le dije a eso?", answers: ["amague", "error", "una trampa"], targetIndex: 7, reward: "A" },
            { question: "La primer excusa para vernos fue...", answers: ["vale por", "merienda", "cafe", "caf√©","helado"], targetIndex: 8, reward: "M" },
            { question: "Animal que define el tipo de abrazo que te debo.", answers: ["oso"], targetIndex: 9, reward: "O" }
        ];

        // --- L√ìGICA DEL JUEGO ---
        let currentLevelIndex = 0;
        let shuffledLevels = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initGame() {
            shuffledLevels = shuffleArray([...levels]);
            loadLevel();
        }

        function loadLevel() {
            if (currentLevelIndex >= shuffledLevels.length) {
                document.getElementById('question-area').classList.add('hidden');
                document.getElementById('final-screen').classList.remove('hidden');
                return;
            }
            const levelData = shuffledLevels[currentLevelIndex];
            document.getElementById('q-counter').innerText = currentLevelIndex + 1;
            document.getElementById('q-title').innerText = "DESAF√çO #" + (currentLevelIndex + 1);
            document.getElementById('q-text').innerText = levelData.question;
            const input = document.getElementById('user-input');
            input.value = ""; input.focus(); document.getElementById('error-msg').innerText = "";
        }

        function submitAnswer() {
            const input = document.getElementById('user-input').value.toLowerCase().trim();
            const levelData = shuffledLevels[currentLevelIndex];
            const errorMsg = document.getElementById('error-msg');

            if (levelData.answers.includes(input)) {
                const slot = document.getElementById('slot-' + levelData.targetIndex);
                slot.innerText = levelData.reward;
                slot.classList.add('unlocked');
                currentLevelIndex++;
                document.getElementById('user-input').style.borderColor = "#00ff00";
                setTimeout(() => { document.getElementById('user-input').style.borderColor = "#444"; loadLevel(); }, 500);
            } else {
                errorMsg.innerText = "‚ùå Mmm... acceso denegado. Intent√° de nuevo.";
                const inputField = document.getElementById('user-input');
                inputField.style.borderColor = "red"; inputField.classList.add('shake');
                setTimeout(() => { inputField.style.borderColor = "#444"; }, 500);
            }
        }

        document.getElementById('user-input').addEventListener("keypress", function(event) {
            if (event.key === "Enter") { submitAnswer(); }
        });

        // --- L√ìGICA DE MODALES Y CARROUSEL ---
        
        function openModal(giftType) {
            document.getElementById('modal-overlay').classList.add('active');
            
            document.getElementById('modal-gift1').classList.add('hidden');
            document.getElementById('modal-gift2').classList.add('hidden');

            if(giftType === 'gift1') {
                document.getElementById('modal-gift1').classList.remove('hidden');
            } else {
                document.getElementById('modal-gift2').classList.remove('hidden');
            }
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
        }

        let slideIndex = 0;
        
        function changeSlide(n) {
            let slides = document.getElementsByClassName("carousel-slide");
            let dateDisplay = document.getElementById("carousel-date-display");

            slideIndex += n;
            if (slideIndex >= slides.length) { slideIndex = 0 }
            if (slideIndex < 0) { slideIndex = slides.length - 1 }
            
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
            }
            
            // Mostrar la nueva imagen
            slides[slideIndex].classList.add("active");
            
            // ACTUALIZAR LA FECHA (Lee el atributo data-date)
            let newDate = slides[slideIndex].getAttribute("data-date");
            dateDisplay.innerText = newDate;
        }

        initGame();

    </script>
</body>
</html>